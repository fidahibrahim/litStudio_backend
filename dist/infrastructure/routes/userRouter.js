"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = __importDefault(require("express"));
const userRepository_1 = __importDefault(require("../../adapters/repository/userRepository"));
const userSchema_1 = __importDefault(require("../model/userSchema"));
const userUseCase_1 = __importDefault(require("../../useCase/userUseCase"));
const userController_1 = __importDefault(require("../../adapters/controller/userController"));
const hashingService_1 = __importDefault(require("../utils/hashingService"));
const jwtService_1 = __importDefault(require("../utils/jwtService"));
const multer_1 = __importDefault(require("../middleware/multer"));
const blogSchema_1 = require("../model/blogSchema");
const userAuth_1 = __importDefault(require("../middleware/userAuth"));
const userRouter = express_1.default.Router();
const JwtService = new jwtService_1.default();
const hashingService = new hashingService_1.default();
const UserRepository = new userRepository_1.default(userSchema_1.default, blogSchema_1.Blog);
const UserUseCase = new userUseCase_1.default(UserRepository, hashingService, JwtService);
const UserController = new userController_1.default(UserUseCase);
userRouter.post('/register', UserController.register);
userRouter.post('/login', UserController.login);
userRouter.post('/logout', UserController.logout);
userRouter.post('/addBlog', userAuth_1.default, multer_1.default.single('image'), UserController.addBlog);
userRouter.get('/getUserBlogs/:userId', userAuth_1.default, UserController.fetchUserBlogs);
userRouter.get('/listBlogs', userAuth_1.default, UserController.listBlogs);
userRouter.delete("/deleteBlog/:blogId", userAuth_1.default, UserController.deleteBlog);
userRouter.get('/fetchBlog/:blogId', userAuth_1.default, UserController.getBlogById);
userRouter.put('/blogs/update', userAuth_1.default, multer_1.default.single('image'), UserController.updateBlog);
exports.default = userRouter;
